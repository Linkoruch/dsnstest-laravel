# Автоматичне прокручування при додаванні питань

## Що було реалізовано

Додано функціонал автоматичного прокручування сторінки вниз при натисканні кнопки "Додати питання" на сторінках створення та редагування тестів. Кнопка "Додати питання" тепер розміщена після списку питань і автоматично опускається вниз при додаванні нових питань.

**ВАЖЛИВО:** Прокручування відбувається ТІЛЬКИ при ручному натисканні кнопки, а не при завантаженні сторінки.

## Зміни у файлах

### 1. EditTest.php
**Шлях:** `app/Livewire/Tests/EditTest.php`

Додано виклик події `questionAdded` після додавання нового питання з контролем через параметр:

```php
public function addQuestion($triggerScroll = true)
{
    $this->questions[] = [
        'question_text' => '',
        'option_a' => '',
        'option_b' => '',
        'option_c' => '',
        'option_d' => '',
        'correct_answer' => 'A',
    ];
    
    // Викликаємо подію для прокручування вниз ТІЛЬКИ якщо це ручне додавання
    if ($triggerScroll) {
        $this->dispatch('questionAdded');
    }
}
```

В методі `mount()`:
```php
// Якщо немає питань, додаємо одне порожнє
if (empty($this->questions)) {
    $this->addQuestion(false); // false = не прокручувати при mount
}
```

### 2. edit-test.blade.php
**Шлях:** `resources/views/livewire/tests/edit-test.blade.php`

**Зміни:**
- Видалено кнопку "Додати питання" з верхньої частини (над списком питань)
- Додано кнопку "Додати питання" після списку питань
- Додано `id="questions-container"` до контейнера з питаннями
- Оновлено JavaScript код для прокручування до кнопки:

```javascript
@script
<script>
    $wire.on('questionAdded', () => {
        setTimeout(() => {
            const questionsContainer = document.getElementById('questions-container');
            if (questionsContainer) {
                // Знаходимо кнопку "Додати питання" (наступний елемент після контейнера)
                const addButton = questionsContainer.nextElementSibling;
                if (addButton) {
                    // Плавно прокручуємо до кнопки
                    addButton.scrollIntoView({ 
                        behavior: 'smooth', 
                        block: 'center',
                        inline: 'nearest'
                    });
                }
            }
        }, 100);
    });
</script>
@endscript
```

### 3. CreateTest.php
**Шлях:** `app/Livewire/Tests/CreateTest.php`

Аналогічні зміни як у EditTest.php:

```php
public function mount()
{
    // Додаємо одне порожнє питання для початку
    $this->addQuestion(false); // false = не прокручувати при mount
}

public function addQuestion($triggerScroll = true)
{
    $this->questions[] = [
        'question_text' => '',
        'option_a' => '',
        'option_b' => '',
        'option_c' => '',
        'option_d' => '',
        'correct_answer' => 'A',
    ];
    
    // Викликаємо подію для прокручування вниз ТІЛЬКИ якщо це ручне додавання
    if ($triggerScroll) {
        $this->dispatch('questionAdded');
    }
}
```

### 4. create-test.blade.php
**Шлях:** `resources/views/livewire/tests/create-test.blade.php`

Аналогічні зміни як у edit-test.blade.php:
- Перенесено кнопку "Додати питання" після списку питань
- Додано id контейнера та оновлено JavaScript код

## Як це працює

1. **При завантаженні сторінки:**
   - Викликається `mount()` 
   - Додається початкове питання через `addQuestion(false)`
   - Параметр `false` запобігає викликові події `questionAdded`
   - **Прокручування НЕ відбувається** ✅

2. **При натисканні кнопки "Додати питання":**
   - Livewire викликає метод `addQuestion()` БЕЗ параметра
   - За замовчуванням `$triggerScroll = true`
   - Викликається подія `questionAdded`
   - JavaScript обробник чекає оновлення DOM (100мс)
   - Знаходить кнопку "Додати питання"
   - **Плавно прокручує до кнопки** ✅

## Переваги

- ✅ Плавне прокручування (smooth scroll)
- ✅ Кнопка завжди залишається доступною внизу списку
- ✅ Автоматичне прокручування до кнопки після додавання питання
- ✅ **НЕ прокручує при завантаженні сторінки** (виправлено)
- ✅ Покращений UX при додаванні декількох питань
- ✅ Працює як на сторінці створення, так і редагування тестів
- ✅ Природне розміщення кнопки - після останнього питання
- ✅ Кнопка центрується на екрані для кращої видимості

## Технічні деталі

**Параметр `$triggerScroll`:**
- `true` (за замовчуванням) - викликає подію прокручування
- `false` - не викликає подію (використовується в `mount()`)

Це дозволяє розрізняти автоматичне додавання при ініціалізації від ручного додавання користувачем.

## Тестування

Щоб перевірити функціонал:

1. **Перевірка початкового завантаження:**
   - Перейдіть на сторінку створення або редагування тесту
   - ✅ Сторінка має залишитися вгорі (не прокручуватися)
   - ✅ Початкове питання додається без прокручування

2. **Перевірка ручного додавання:**
   - Прокрутіть до кнопки "Додати питання" (внизу списку)
   - Натисніть кнопку "Додати питання"
   - ✅ Сторінка має автоматично плавно прокрутитися до кнопки
   - ✅ Нове питання з'явиться над кнопкою
   - ✅ Кнопка залишиться видимою в центрі екрану

3. **Перевірка множинного додавання:**
   - Повторіть кілька разів
   - ✅ Кожне натискання викликає плавне прокручування
   - ✅ Кнопка завжди доступна внизу
