# CRUD для тестів - Документація

## Що було реалізовано ✅

### 1. Модель Test
- Файл: `app/Models/Test.php`
- Поля:
  - `name` - назва тесту
  - `description` - опис тесту (опціонально)
  - `questions_file_path` - шлях до JSON файлу з питаннями
- Метод `getQuestions()` - отримує питання з JSON файлу

### 2. Міграція
- Файл: `database/migrations/2026_01_31_085642_create_tests_table.php`
- Створює таблицю `tests` з усіма необхідними полями

### 3. Livewire компоненти

#### TestList (список тестів)
- Файл: `app/Livewire/Tests/TestList.php`
- View: `resources/views/livewire/tests/test-list.blade.php`
- Функції:
  - Перегляд всіх тестів з пагінацією
  - Пошук за назвою та описом
  - Видалення тестів через модальне вікно
  - Автоматичне видалення JSON файлу при видаленні тесту

#### CreateTest (створення тесту)
- Файл: `app/Livewire/Tests/CreateTest.php`
- View: `resources/views/livewire/tests/create-test.blade.php`
- Функції:
  - **Форма для створення нового тесту**
  - **Динамічне додавання/видалення питань**
  - Кожне питання містить:
    - Текст питання
    - 4 варіанти відповідей (A, B, C, D)
    - Вибір правильної відповіді
  - **Сервер автоматично генерує JSON файл** з усіх питань
  - Валідація всіх полів
  - Автоматичне зберігання файлу в `storage/app/tests/`

#### EditTest (редагування тесту)
- Файл: `app/Livewire/Tests/EditTest.php`
- View: `resources/views/livewire/tests/edit-test.blade.php`
- Функції:
  - Редагування назви та опису
  - **Завантаження існуючих питань з JSON**
  - **Додавання нових питань**
  - **Редагування існуючих питань**
  - **Видалення питань**
  - Автоматичне оновлення JSON файлу

### 4. Маршрути
- `/tests` - список тестів (GET)
- `/tests/create` - форма створення (GET)
- `/tests/{test}/edit` - форма редагування (GET)
- Всі маршрути доступні тільки для адміністраторів (middleware: `auth`, `role:admin`)

### 5. Навігація
- Додано пункт "Управління тестами" в головне меню (тільки для адміністраторів)
- Адаптивна навігація для мобільних пристроїв

### 6. Автоматична генерація JSON

**Ключова особливість:** Адмін НЕ завантажує JSON файли, а **заповнює форму**, і сервер сам створює JSON!

Формат JSON файлу (створюється автоматично):

```json
{
  "questions": [
    {
      "question_id": 1,
      "question_text": "Текст питання",
      "options": {
        "A": "Варіант А",
        "B": "Варіант B",
        "C": "Варіант C",
        "D": "Варіант D"
      },
      "correct_answer": "B"
    }
  ]
}
```

## Як користуватись

### Для адміністраторів:

1. **Увійдіть як адміністратор** (email: test@test.com, пароль: password)

2. **Перегляд тестів**:
   - Перейдіть в меню "Управління тестами"
   - Використовуйте пошук для фільтрації

3. **Створення тесту**:
   - Натисніть кнопку "Додати тест"
   - Заповніть назву та опис
   - **Додайте питання через форму:**
     - Введіть текст питання
     - Заповніть 4 варіанти відповідей (A, B, C, D)
     - Оберіть правильну відповідь
     - Натисніть "Додати питання" для додавання ще одного
     - Можна видалити питання кнопкою корзини
   - Натисніть "Створити тест"
   - **JSON файл створюється автоматично!**

4. **Редагування тесту**:
   - Натисніть іконку олівця біля потрібного тесту
   - Змініть назву, опис або питання
   - Додайте нові питання або видаліть існуючі
   - Натисніть "Оновити тест"
   - **JSON файл оновлюється автоматично!**

5. **Видалення тесту**:
   - Натисніть іконку корзини біля потрібного тесту
   - Підтвердіть видалення в модальному вікні
   - JSON файл також видаляється

## Переваги підходу

### Чому питання не зберігаються в базі даних?

1. **Продуктивність** - не навантажуємо БД великою кількістю записів
2. **Швидкість читання** - один файл читається швидше ніж багато запитів до БД
3. **Простота резервного копіювання** - можна просто скопіювати JSON файли
4. **Гнучкість** - легко експортувати/імпортувати тести

### Чому JSON генерується сервером, а не завантажується?

1. **Зручність для адміна** - не треба знати формат JSON
2. **Валідація** - сервер перевіряє правильність даних
3. **Безпека** - неможливо завантажити шкідливий файл
4. **Консистентність** - всі JSON файли мають однаковий формат

## Технології
- Laravel 11
- Livewire 3
- Tailwind CSS
- Laravel Permission (Spatie)
- SQLite

## Примітки
- Всі JSON файли зберігаються в `storage/app/tests/`
- При видаленні тесту автоматично видаляється і JSON файл
- При редагуванні тесту JSON файл повністю перезаписується
- Мінімум 1 питання потрібно для створення тесту
- Всі поля обов'язкові (крім опису тесту)


## Що було реалізовано ✅

### 1. Модель Test
- Файл: `app/Models/Test.php`
- Поля:
  - `name` - назва тесту
  - `description` - опис тесту (опціонально)
  - `questions_file_path` - шлях до JSON файлу з питаннями
- Метод `getQuestions()` - отримує питання з JSON файлу

### 2. Міграція
- Файл: `database/migrations/2026_01_31_085642_create_tests_table.php`
- Створює таблицю `tests` з усіма необхідними полями

### 3. Livewire компоненти

#### TestList (список тестів)
- Файл: `app/Livewire/Tests/TestList.php`
- View: `resources/views/livewire/tests/test-list.blade.php`
- Функції:
  - Перегляд всіх тестів з пагінацією
  - Пошук за назвою та описом
  - Видалення тестів через модальне вікно
  - Автоматичне видалення JSON файлу при видаленні тесту

#### CreateTest (створення тесту)
- Файл: `app/Livewire/Tests/CreateTest.php`
- View: `resources/views/livewire/tests/create-test.blade.php`
- Функції:
  - Форма для створення нового тесту
  - Завантаження JSON файлу з питаннями
  - Валідація формату JSON
  - Автоматичне зберігання файлу в `storage/app/tests/`

#### EditTest (редагування тесту)
- Файл: `app/Livewire/Tests/EditTest.php`
- View: `resources/views/livewire/tests/edit-test.blade.php`
- Функції:
  - Редагування назви та опису
  - Можливість замінити JSON файл
  - Автоматичне видалення старого файлу при заміні

### 4. Маршрути
- `/tests` - список тестів (GET)
- `/tests/create` - форма створення (GET)
- `/tests/{test}/edit` - форма редагування (GET)
- Всі маршрути доступні тільки для адміністраторів (middleware: `auth`, `role:admin`)

### 5. Навігація
- Додано пункт "Управління тестами" в головне меню (тільки для адміністраторів)
- Адаптивна навігація для мобільних пристроїв

### 6. Seeder
- Файл: `database/seeders/TestSeeder.php`
- Створює 3 приклади тестів
- Приклад JSON файлу: `storage/app/tests/example_test_questions.json`

## Формат JSON файлу з питаннями

```json
{
  "questions": [
    {
      "question_id": 1,
      "question_text": "Текст питання",
      "options": {
        "A": "Варіант А",
        "B": "Варіант B",
        "C": "Варіант C",
        "D": "Варіант D"
      },
      "correct_answer": "B"
    }
  ]
}
```

## Як користуватись

### Для адміністраторів:

1. **Увійдіть як адміністратор** (email: test@test.com, пароль: password)

2. **Перегляд тестів**:
   - Перейдіть в меню "Управління тестами"
   - Використовуйте пошук для фільтрації

3. **Створення тесту**:
   - Натисніть кнопку "Додати тест"
   - Заповніть назву та опис
   - Завантажте JSON файл з питаннями
   - Натисніть "Створити тест"

4. **Редагування тесту**:
   - Натисніть іконку олівця біля потрібного тесту
   - Змініть дані
   - При потребі замініть JSON файл
   - Натисніть "Оновити тест"

5. **Видалення тесту**:
   - Натисніть іконку корзини біля потрібного тесту
   - Підтвердіть видалення в модальному вікні

## Технології
- Laravel 11
- Livewire 3
- Tailwind CSS
- Laravel Permission (Spatie)
- SQLite

## Примітки
- Всі JSON файли зберігаються в `storage/app/tests/`
- При видаленні тесту автоматично видаляється і файл з питаннями
- Максимальний розмір JSON файлу: 2MB
- Підтримується тільки формат JSON
